<!DOCTYPE HTML>
<html>
<head><meta content="text/html; charset=UTF-8">
    <title>Camera WiFi Remote Control</title>
    <script src="/WIFICTRL/140medley.min.js"></script>
<style>
body {
  background: #B8D7FF;
}

.fs7{
  max-width:400px;
  margin:50px auto;
  background:#fff;
  border-radius:2px;
  padding:20px;
  font-family: Georgia, "Times New Roman", Times, serif;
}
.fs7 h1{
  display: block;
  text-align: center;
  padding: 0;
  margin: 0px 0px 20px 0px;
  color: #5C5C5C;
  font-size:x-large;
}

.center {
  text-align: center;
}
.img_sm img {
  width: 80%; 
  height: auto;
}
</style>

<script>
var lang = navigator.language || navigator.userLanguage;
var r = new j();
var status ={};

	/* For debugging: */
  if (window.location.hostname == "localhost")
    uriprefix="/cgi-bin/get";
  else
    uriprefix="/WIFICTRL/";

function getStatusXhr() {
	geturi = uriprefix + "status.lua?cmd=get";
  r.open("GET", geturi, true);
  r.onreadystatechange = function () {
	  if (r.readyState == 4)
	  {
	    populateStatus(r.responseText);
	  }
  };
  r.send()
}

function populateStatus(jsondata) {
  var para=t('<div id="#{s[this].name}">' +
             '#{s[this].name}: '+
             '<span class="val">#{s[this].value}</span>'+
             '</div>')
  s = JSON.parse(jsondata);
  for (e in s) {
    el=$('#'+s[e].name);
    if (el)
    {
      $(".val", el)[0].innerHTML=s[e].value;
    } else {
      $('#last').insertAdjacentHTML( 'beforebegin', para(e));
    }
  }
}


function action(cmd) {
	geturi = uriprefix + "status.lua?cmd=set&par="+cmd;
  r.open("GET", geturi, true);
  r.onreadystatechange = function () {
	  if (r.readyState == 4)
	  {
	    populateStatus(r.responseText);
	  }
  };
  r.send()
}

window.onload=function(e) {
	getStatusXhr();
};

</script>

</head>
<body>
<div class="fs7">
  <h1>Camera WiFi Remote Control</h1>
    <table><tbody>
      <tr class="center img_sm"><td onclick="action('ZOOMOUT')"><img src="zoomout.png" alt="Zoom Out"/><br />Zoom Out</td><td onclick="action('ZOOMIN')"><img src="zoomin.png" alt="Zoom In"/><br />Zoom In</td></tr>
      <tr class="center"><td colspan="2" onclick="action('SHOOT')"><img align="middle" style="width:50%;" src="shutter.png" alt="Take Picture"/><br />Take Picture!</td></tr>
    </tbody></table>
    <hr />
  <div id="status">
  <div id="last">
  </div>
  </div>

</div>

<div>
<p>Created by Jens Heilig, 2016-08-11</p>
<p>
Some Icons made by <a href="http://www.flaticon.com/authors/linh-pham" title="Linh Pham">Linh Pham</a> from <a href="http://www.flaticon.com" title="Flaticon">www.flaticon.com</a>, licensed by <a href="http://creativecommons.org/licenses/by/3.0/" title="Creative Commons BY 3.0" target="_blank">CC 3.0 BY</a>
</p>
</div>
</body>
</html>
